# Gmail MCP Server - Quick Start (5 Minutes)

The fastest way to get your Gmail MCP server running.

## Option A: Using Python Script (Recommended)

### 1. Install Python Dependencies
```bash
pip install -r scripts/requirements-gmail.txt
```

### 2. Get Google Cloud Credentials
1. Go to: https://console.cloud.google.com/
2. Create project â†’ Enable Gmail API â†’ Create OAuth credentials
3. Download JSON â†’ Save as `mcp_servers/email/config.json`

**Detailed instructions:** See [SETUP_GUIDE.md](SETUP_GUIDE.md) Step 2

### 3. Run Python OAuth Setup
```bash
python scripts/setup_gmail_oauth.py
```

This will:
- âœ“ Validate your config.json
- âœ“ Open browser for Google consent
- âœ“ Save token.json automatically
- âœ“ Verify the token works

### 4. Convert Token Format (if needed)
```bash
python scripts/convert_gmail_token.py
```

### 5. Install Node.js Dependencies
```bash
cd mcp_servers/email
npm install
```

### 6. Configure Claude for Desktop

**macOS:**
```bash
code ~/Library/Application\ Support/Claude/claude_desktop_config.json
```

**Windows:**
```powershell
code %APPDATA%\Claude\claude_desktop_config.json
```

Add:
```json
{
  "mcpServers": {
    "gmail": {
      "command": "node",
      "args": ["/ABSOLUTE/PATH/TO/mcp_servers/email/server.js"]
    }
  }
}
```

### 7. Restart Claude & Test

Restart Claude for Desktop (Cmd+Q on macOS), then try:
```
Search my Gmail for unread emails
```

---

## Option B: Using Node.js Script

### 1. Get Google Cloud Credentials
(Same as Option A, Step 2)

### 2. Install Node.js Dependencies
```bash
cd mcp_servers/email
npm install
```

### 3. Run Node.js OAuth Setup
```bash
node auth.js
```

Follow the prompts to authorize.

### 4. Configure Claude for Desktop
(Same as Option A, Step 6)

### 5. Restart Claude & Test
(Same as Option A, Step 7)

---

## Troubleshooting

### "Credentials file not found"
- Ensure config.json is in `mcp_servers/email/config.json`
- Verify it's the OAuth credentials (not API key)

### "Token verification failed"
- Check Gmail API is enabled in Google Cloud Console
- Ensure you granted all 4 scopes during authorization

### "Server not showing in Claude"
- Use absolute paths in claude_desktop_config.json
- Fully quit Claude (Cmd+Q, not just close window)
- Check logs: `~/Library/Logs/Claude/mcp.log`

### "Port 8080 already in use"
- Close other applications using port 8080
- Or edit the port in setup_gmail_oauth.py (line 45)

---

## What Each Script Does

**setup_gmail_oauth.py** (Python):
- Interactive OAuth2 flow with browser
- Validates credentials automatically
- Tests token with Gmail API
- Detailed error messages
- Creates token.json in Python format

**convert_gmail_token.py** (Python):
- Converts Python token format â†’ Node.js format
- Creates backup before conversion
- Validates converted token

**auth.js** (Node.js):
- Direct OAuth2 flow for Node.js
- Creates token.json in Node.js format
- Alternative to Python scripts

---

## Files Overview

```
mcp_servers/email/
â”œâ”€â”€ config.json           â† Your OAuth credentials (from Google)
â”œâ”€â”€ token.json            â† Generated by auth scripts
â”œâ”€â”€ server.js             â† MCP server (runs via Claude)
â”œâ”€â”€ auth.js               â† Node.js OAuth helper
â”œâ”€â”€ package.json          â† Node.js dependencies
â””â”€â”€ node_modules/         â† Installed dependencies

scripts/
â”œâ”€â”€ setup_gmail_oauth.py  â† Python OAuth setup (recommended)
â”œâ”€â”€ convert_gmail_token.py â† Pythonâ†’Node.js converter
â””â”€â”€ requirements-gmail.txt â† Python dependencies
```

---

## Security Reminders

- âœ… Never commit config.json or token.json
- âœ… .gitignore already excludes these files
- âœ… Token file has 600 permissions (owner only)
- âœ… Refresh token enables automatic renewal

---

## Need More Help?

- **Full Setup Guide:** [SETUP_GUIDE.md](SETUP_GUIDE.md)
- **Complete Documentation:** [README.md](README.md)
- **MCP Protocol:** https://modelcontextprotocol.io/
- **Gmail API:** https://developers.google.com/gmail/api

---

## Success Checklist

- [ ] config.json downloaded from Google Cloud
- [ ] Python/Node.js dependencies installed
- [ ] OAuth flow completed (browser authorization)
- [ ] token.json created and validated
- [ ] Node.js packages installed (npm install)
- [ ] Claude config updated with absolute path
- [ ] Claude for Desktop fully restarted
- [ ] Gmail tools visible in Claude (ğŸ“ icon)
- [ ] Test query works: "Search my Gmail"

**All checked?** You're ready to use your AI-powered email assistant! ğŸ‰
